---
title: 'webpack çš„æ‡¶åŠ è¼‰'
desc: "åœ¨ä¸Šç¯‡'ç¨‹å¼ç¢¼æ‹†åˆ†'çš„æœ€å¾Œï¼Œæˆ‘å€‘ä»‹ç´¹äº†å‹•æ…‹å°Žå…¥ï¼Œä½ å¯èƒ½æœƒæƒ³è¦å‹•æ…‹å°Žå…¥æœ‰ä»€éº¼ç”¨ï¼ŒæŽ¥ä¸‹ä¾†å°±ä»‹ç´¹å‹•æ…‹å°Žå…¥çš„æ‡‰ç”¨ä¹‹ä¸€ï¼Œæ‡¶åŠ è¼‰ã€‚"
date: '2023-08-31'
isActive: false
---

åœ¨ä¸Šç¯‡ ç¨‹å¼ç¢¼æ‹†åˆ† çš„æœ€å¾Œï¼Œæˆ‘å€‘ä»‹ç´¹äº†å‹•æ…‹å°Žå…¥ï¼Œä½ å¯èƒ½æœƒæƒ³è¦å‹•æ…‹å°Žå…¥æœ‰ä»€éº¼ç”¨ï¼ŒæŽ¥ä¸‹ä¾†å°±ä»‹ç´¹å‹•æ…‹å°Žå…¥çš„æ‡‰ç”¨ä¹‹ä¸€ - æ‡¶åŠ è¼‰ã€‚

## æ‡¶åŠ è¼‰

æ‡¶åŠ è¼‰åˆç¨±ç‚ºæŒ‰éœ€åŠ è¼‰ï¼Œæ˜¯éžå¸¸å¥½çš„å„ªåŒ–ç¶²é çš„æ–¹å¼ï¼Œå®ƒæœƒåœ¨éœ€è¦çš„æ™‚å€™æ‰å¼•å…¥ç›¸å°çš„æ¨¡çµ„ï¼Œå› ç‚ºæœ‰äº›æ¨¡çµ„å¯èƒ½éƒ½ä¸æœƒç”¨åˆ°ï¼Œè‹¥æ˜¯åœ¨ä¸€é–‹å§‹å°±å¼•å…¥æœƒå¢žåŠ ç¶²é çš„è² æ“”

æˆ‘å€‘å…ˆæ–°å¢žä¸€å€‹ `math.js` ç°¡å–®å°Žå‡ºå…©å€‹å‡½æ•¸

```jsx
// ./src/math.js
export const add = (x, y) => {
  return x + y;
};

export const minus = (x, y) => {
  return x - y;
};
```

ä¸¦ä¸”æ–°å¢žä¸€å€‹æŒ‰éˆ•ï¼Œç•¶é»žæ“Šæ™‚æœƒå¼•å…¥ math.js è£¡çš„ add å‡½æ•¸

```jsx
// ./src/index.js
import './async-module';

console.log('Hello from index');

const button = document.createElement('button');
button.textContent = 'click to add';
button.addEventListener('click', () => {
  import(/*webpackChunkName: 'math'*/ './math.js').then(({ add }) => {
    // ðŸ‘† å¯ä»¥åƒé€™æ¨£æŒ‡å®šæ‰“åŒ…å¾Œçš„åç¨±
    console.log(add(4, 5));
  });
});

document.body.appendChild(button);
```

é€™æ¨£çš„å¥½è™•æ˜¯ï¼Œé»žæ“ŠæŒ‰æ‰­å‰ï¼Œç¶²é æ˜¯ä¸æœƒè¼‰å…¥ math.js çš„ï¼Œæˆ‘å€‘å¯ä»¥æŒ‰ F12 æ‰“é–‹é–‹ç™¼äººå“¡çš„å·¥å…·çš„ network é é¢è§€å¯Ÿ

![webpack-4-lazy-loading.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/baaf0178-a57f-4ebd-befa-9d603aff34f9/webpack-4-lazy-loading.png)

è€Œé»žæ“ŠæŒ‰æ‰­å‹•æ…‹è¼‰å…¥å¾Œï¼Œæ‰æœƒå¼•å…¥ math.js

![webpack-4-lazy-loading2.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c52be585-169f-43b3-89c5-0a417983578a/webpack-4-lazy-loading2.png)

## é åŠ è¼‰

### prefetch

ç€è¦½å™¨æœƒåœ¨åŠ è¼‰å®Œæ‰€æœ‰çš„å…§å®¹å¾Œï¼Œæ‰åŠ è¼‰ prefetch

ä½¿ç”¨æ–¹å¼æ˜¯ç›´æŽ¥åœ¨å‹•æ…‹å°Žå…¥çš„åœ°æ–¹ï¼ŒåŠ ä¸Š `webpackPrefetch:true`

é€™å€‹çš„æ•ˆæžœæ¯”å‰é¢çš„æ‡¶åŠ è¼‰æ•ˆæžœæ›´å¥½

```jsx
// ./src/math.js
import './async-module';

console.log('Hello from index');

const button = document.createElement('button');
button.textContent = 'click to add';
button.addEventListener('click', () => {
  import(/*webpackChunkName: 'math', webpackPrefetch: true*/ './math.js').then(
    ({ add }) => {
      console.log(add(4, 5));
    },
  );
});

document.body.appendChild(button);
```

### preload

å’Œæ‡¶åŠ è¼‰çš„æ•ˆæžœé¡žä¼¼

```jsx
// ./src/math.js
import './async-module';

console.log('Hello from index');

const button = document.createElement('button');
button.textContent = 'click to add';
button.addEventListener('click', () => {
  import(/*webpackChunkName: 'math', webpackPreload: true*/ './math.js').then(
    ({ add }) => {
      console.log(add(4, 5));
    },
  );
});

document.body.appendChild(button);
```
