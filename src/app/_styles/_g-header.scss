@use '__mixins.scss';

#main,
#g-footer {
  transition: filter 0.1s 0.2s linear;
}

:root.is-megamenu-open {
  #main,
  #g-footer {
    @apply blur-lg delay-0;
  }

  .g-header {
    @apply translate-y-0;
  }
}

:root.is-mobile-menu-open {
  #main,
  #g-footer {
    @apply blur-lg delay-0;
  }
}

// *** Header ***
.g-header {
  &.is-scrolled {
    @apply bg-white py-2 shadow-sm;

    .g-header__logo {
      &__text {
        @apply -translate-x-[40px];
      }
      &__img {
        @apply scale-0 opacity-0;
      }
    }
  }

  &__normal-link {
    &.is-button {
      @apply px-6 py-1;
    }
  }
}

// *** Posts Megamenu ***
.g-header__posts-megamenu {
  &.is-active {
    @apply pointer-events-auto scale-100 opacity-100 duration-[0.4s];

    .g-header__posts-megamenu {
      &__item {
        @apply opacity-100 duration-700;
        @for $i from 1 through 6 {
          &:nth-child(#{$i}) {
            transition-delay: ($i - 1) * 0.1s + 0.2s;
          }
        }
      }
    }
  }

  @include breakpoint('md') {
    left: var(--s-edge-dynamic);
    right: var(--s-edge-dynamic);
  }

  @include breakpoint('lg') {
    left: min(calc(3 * var(--s-edge-dynamic)), 15vw);
    right: min(calc(3 * var(--s-edge-dynamic)), 15vw);
  }

  &__link {
    &:hover {
      --tw-bg-opacity: 0.2;
    }
  }

  &__categories {
    &::-webkit-scrollbar {
      height: 0.25em;
    }
  }
}

// *** Mobile Menu ***
.g-header__mobile-menu {
  clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
  transition: 0.6s var(--t-circ-ease-in-out);

  &.is-open {
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  }

  &__content {
    @apply pt-header text-blue mt-6 flex h-full flex-col overflow-y-auto pb-4;
  }

  &__accordion {
    @apply border-blue border-b;

    &__link {
      @apply block p-4 font-semibold;
    }

    &__list {
      @apply mt-2 mb-8 ml-6 flex flex-col gap-2;
    }
  }

  &__link {
    @apply border-blue block border-b p-4 font-semibold;
  }

  &__button {
    @apply mt-8;
  }
}

// *** Mobile Menu Trigger ***
.g-header__mobile-menu__trigger {
  @apply relative h-[16px] w-[24px] cursor-pointer;

  &::before,
  &::after {
    @apply absolute h-[3px] w-full rounded-[6px] bg-neutral-900;

    content: '';
    transform: translateY(0px) scale(1) rotate(0);
  }

  &::after {
    @apply top-0 left-0;
    animation: reverse-top-line 0.6s ease-in-out forwards;
  }

  &::before {
    @apply right-0 bottom-0 w-[80%];
    animation: reverse-bottom-line 0.6s ease-in-out forwards;
  }

  &.is-open {
    &::after {
      transform: translateY(0px) scale(1) rotate(0);
      animation: is-open-top-line 0.6s ease-in-out forwards;
    }

    &::before {
      transform: translateY(0) scale(1) rotate(0);
      animation: is-open-bottom-line 0.6s ease-in-out forwards;
    }
  }

  &.is-initial {
    &::after,
    &::before {
      animation-duration: 0s;
    }
  }

  @keyframes is-open-top-line {
    0% {
      transform: translateY(0px) scale(1) rotate(0);
    }

    50% {
      transform: translateY(-5px) scale(1.1) rotate(0);
    }

    100% {
      transform: translateY(6.5px) scale(1) rotate(-45deg);
    }
  }

  @keyframes is-open-bottom-line {
    0% {
      width: 80%;
      transform: translateY(0px) scale(1) rotate(0);
    }

    50% {
      width: 100%;
      transform: translateY(5px) scale(1.1) rotate(0);
    }

    100% {
      width: 100%;
      transform: translateY(-6.5px) scale(1) rotate(45deg);
    }
  }

  @keyframes reverse-top-line {
    0% {
      transform: translateY(6.5px) scale(1) rotate(-45deg);
    }

    50% {
      transform: translateY(-5px) scale(1.1) rotate(0);
    }

    100% {
      transform: translateY(0px) scale(1) rotate(0);
    }
  }

  @keyframes reverse-bottom-line {
    0% {
      width: 100%;
      transform: translateY(-6.5px) scale(1) rotate(45deg);
    }

    50% {
      width: 100%;
      transform: translateY(5px) scale(1.1) rotate(0);
    }

    100% {
      width: 80%;
      transform: translateY(0px) scale(1) rotate(0);
    }
  }
}
